# 项目开发计划：AI 驱动的文本转 Mermaid 图表 Web 应用

## 1. 项目初始化与环境设置

- [x] 初始化 Next.js 15 项目
- [ ] 配置 Tailwind CSS 和 Shadcn UI
- [ ] 设置环境变量 (.env.local) 用于 AI API 配置
- [ ] 配置项目目录结构

## 2. 核心功能开发

### 2.1 基础UI布局

- [ ] 创建基础布局组件 (layout.tsx)
- [ ] 实现响应式布局设计
- [ ] 添加主题切换功能 (暗/亮模式)
- [ ] 实现主页面结构 (文本输入区、图表展示区、编辑区)

### 2.2 文本输入与处理功能

- [ ] 实现文本编辑器组件
- [ ] 添加文件上传功能，支持 .txt, .md, .docx 文件
- [ ] 实现文件解析与文本提取
- [ ] 添加字数统计和字符限制功能 (20,000字符)
- [ ] 实现文本预处理函数

### 2.3 AI 文本转 Mermaid 代码实现

- [ ] 创建 AI API 服务封装
- [ ] 设计 Prompt 模板，针对不同图表类型
- [ ] 实现与 AI 模型的通信逻辑
- [ ] 实现错误处理与请求状态管理
- [ ] 添加生成类型选择功能 (流程图、序列图等)

### 2.4 Mermaid 代码编辑与渲染

- [ ] 添加代码编辑器组件
- [ ] 集成 Excalidraw 组件
- [ ] 实现 mermaid-to-excalidraw 转换
- [ ] 实现实时渲染功能
- [ ] 添加图表交互功能 (拖拽、缩放等)

### 2.5 用户交互功能

- [ ] 添加"生成图表"按钮及loading状态
- [ ] 实现"复制代码"功能
- [ ] 实现"导出图表"功能 (PNG, SVG)
- [ ] 添加错误提示与用户反馈组件

## 3. 性能优化与用户体验提升

- [ ] 实现懒加载和动态导入
- [ ] 优化大文件处理逻辑
- [ ] 添加缓存策略
- [ ] 添加加载状态和反馈动画
- [ ] 进行响应式测试与优化

## 4. 测试与部署

- [ ] 编写单元测试
- [ ] 进行功能测试与UI测试
- [ ] 部署应用
- [ ] 性能监控与分析

## 5. 文档与维护

- [ ] 编写用户使用文档
- [ ] 编写开发文档
- [ ] 代码优化与重构

## 开发排期

1. **阶段一** (基础架构与UI): 1天
   - 项目初始化与环境设置
   - 基础UI布局实现
   - 主题切换功能

2. **阶段二** (核心功能开发): 2天
   - 文本输入与处理功能
   - AI 文本转 Mermaid 代码实现
   - Mermaid 代码编辑与渲染

3. **阶段三** (用户体验优化): 1天
   - 用户交互功能完善
   - 性能优化
   - 错误处理改进

4. **阶段四** (测试与部署): 1天
   - 测试
   - 部署
   - 文档编写

## 技术栈确认

- **前端框架**: Next.js 15 (App Router)
- **UI组件库**: shadcn/ui
- **CSS框架**: Tailwind CSS
- **渲染工具**: 
  - Excalidraw (@excalidraw/excalidraw)
  - mermaid-to-excalidraw (@excalidraw/mermaid-to-excalidraw)
- **文件处理**: 
  - mammoth (处理.docx文件)
- **API集成**: OpenAI兼容模式 